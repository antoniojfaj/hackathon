
<html>
    <head>

    </head>
    <body>
        <script src="js/jQuery.js"></script>
        <script>
            navigator.mediaDevices.getUserMedia({ audio: true })
              .then(stream => {
                const mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();

                const audioChunks = [];
                mediaRecorder.addEventListener("dataavailable", event => {
                  audioChunks.push(event.data);
                });

                mediaRecorder.addEventListener("stop", () => {
                  const audioBlob = new Blob(audioChunks, {type : 'audio/webm'});
                  var reader = new FileReader();
                  var base64data;
                  reader.readAsDataURL(audioBlob); 
                  reader.onloadend = function() {
                    base64data = reader.result;                
                    $.ajax({
                      url:"services.php",
                      // send the base64 post parameter
                      data:{
                        audio: base64data
                      },
                      // important POST method !
                      type:"post",
                      complete:function(results){
                        alert(results.responseText);
                        console.log(results);
                      },
                      error:function(results) {
                        alert('error');
                        console.log(results);
                      }
                    });
                  }
                });

            setTimeout(() => {
              mediaRecorder.stop();
            }, 3000);
          });
        </script>
    </body>
</html>